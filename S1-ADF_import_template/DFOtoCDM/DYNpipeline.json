{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"factoryName":{"type":"string","metadata":"Data Factory name"},"AzureSqlDatabase1":{"type":"string"}},"variables":{"factoryId":"[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"},"resources":[{"name":"[concat(parameters('factoryName'), '/DYNpipeline')]","type":"Microsoft.DataFactory/factories/pipelines","apiVersion":"2018-06-01","properties":{"activities":[{"name":"fixetassetdataflow","type":"ExecuteDataFlow","dependsOn":[],"policy":{"timeout":"7.00:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[],"typeProperties":{"dataflow":{"referenceName":"fixedassetdataflow","type":"DataFlowReference","parameters":{},"datasetParameters":{"DYNfixedassets":{},"CDMfixedassetmaster":{}}},"staging":{},"compute":{"coreCount":8,"computeType":"General"}}}],"annotations":[]},"dependsOn":["[concat(variables('factoryId'), '/dataflows/fixedassetdataflow')]"]},{"name":"[concat(parameters('factoryName'), '/fixedassetdataflow')]","type":"Microsoft.DataFactory/factories/dataflows","apiVersion":"2018-06-01","properties":{"type":"MappingDataFlow","typeProperties":{"sources":[{"dataset":{"referenceName":"DYNfixedassets","type":"DatasetReference"},"name":"DYNfixedassets"}],"sinks":[{"linkedService":{"referenceName":"POC_clientdatalake","type":"LinkedServiceReference"},"schemaLinkedService":{"referenceName":"POC_clientdatalake","type":"LinkedServiceReference"},"name":"CDMfixedassetmaster"}],"transformations":[],"script":"source(output(\n\t\tFIXEDASSETNUMBER as string,\n\t\tACTIVITYCODE as string,\n\t\tACTIVITYCODEDESCRIPTION as string,\n\t\tAGENT as string,\n\t\tASSETCONDITIONDESCRIPTION as string,\n\t\tASSETCONDITIONID as string,\n\t\tASSETLOCATIONID as string,\n\t\tASSETLOCATIONNAME as string,\n\t\tBARCODE as string,\n\t\tCOMMENTS as string,\n\t\tCONTACTNAME as string,\n\t\tCONTACTPERSONNELNUMBER as string,\n\t\tDEPARTMENTOPERATINGUNITNUMBER as string,\n\t\tDEPARTMENTSEARCHNAME as string,\n\t\tDISPOSALRESTRICTIONS as string,\n\t\tDOCUMENTLOCATION as string,\n\t\tFIXEDASSETGROUPID as string,\n\t\tGISREFERENCENUMBER as string,\n\t\tGUARANTEEDATE as string,\n\t\tINFORMATION1 as string,\n\t\tINFORMATION2 as string,\n\t\tINFORMATION3 as string,\n\t\tINSURANCEDATE1 as string,\n\t\tINSURANCEDATE2 as string,\n\t\tINSURANCEVENDOR as string,\n\t\tINSUREDATFAIRMARKETVALUE as string,\n\t\tINSUREDVALUE as string,\n\t\tLASTMAINTENANCE as string,\n\t\tLASTPERIODICVALUECOSTUPDATE as string,\n\t\tLEASENOTE as string,\n\t\tLOCATIONID as string,\n\t\tLOCATIONMEMO as string,\n\t\tMAJORTYPEDESCRIPTION as string,\n\t\tMAJORTYPEID as string,\n\t\tMAKE as string,\n\t\tMISSINGASSET as string,\n\t\tMODEL as string,\n\t\tMODELYEAR as string,\n\t\tNAME as string,\n\t\tNEXTMAINTENANCE as string,\n\t\tPARCELID as string,\n\t\tPHYSICALINVENTORY as string,\n\t\tPOLICYAMOUNT as string,\n\t\tPOLICYEXPIRATIONDATE as string,\n\t\tPOLICYNUMBER as string,\n\t\tPROPERTYGROUPDESCRIPTION as string,\n\t\tPROPERTYGROUPID as string,\n\t\tPROPERTYTYPE as string,\n\t\tQUANTITY as string,\n\t\tREFERENCE as string,\n\t\tREPLACEMENTCOST as string,\n\t\tRESPONSIBLENAME as string,\n\t\tRESPONSIBLEPERSONNELNUMBER as string,\n\t\tROOMNUMBER as string,\n\t\tSEARCHNAME as string,\n\t\tSERIALNUMBER as string,\n\t\tSORTFIELD1DESCRIPTION as string,\n\t\tSORTFIELD1ID as string,\n\t\tSORTFIELD1SORTING as string,\n\t\tSORTFIELD2DESCRIPTION as string,\n\t\tSORTFIELD2ID as string,\n\t\tSORTFIELD2SORTING as string,\n\t\tSORTFIELD3DESCRIPTION as string,\n\t\tSORTFIELD3ID as string,\n\t\tSORTFIELD3SORTING as string,\n\t\tTECHNICALINFORMATION1 as string,\n\t\tTECHNICALINFORMATION2 as string,\n\t\tTECHNICALINFORMATION3 as string,\n\t\tTITLEHOLDER as string,\n\t\tTYPE as string,\n\t\tUNITCOST as string,\n\t\tUNITOFMEASURE as string\n\t),\n\tallowSchemaDrift: false,\n\tvalidateSchema: false,\n\tisolationLevel: 'READ_UNCOMMITTED',\n\tformat: 'table') ~> DYNfixedassets\nDYNfixedassets sink(input(\n\t\tBusinessUnitCode as string,\n\t\tFixedAssetID as string,\n\t\tSerialNumber as string,\n\t\tDepreciationRate as string,\n\t\tFixedAssetDepreciableBasis as string,\n\t\tFixedAssetReplacementCost as string,\n\t\tFixedAssetUnrealizedGainLossAccount as string,\n\t\tLotNumber as string,\n\t\tFixedAssetFairValue as string,\n\t\tSupplierID as string,\n\t\tLocationID as string,\n\t\tLocationCode as string,\n\t\tLocationDescription as string,\n\t\tFixedAssetCode as string,\n\t\tProjectID as string,\n\t\tFixedAssetDescription as string,\n\t\tFixedAssetBarCode as string,\n\t\tManufacturerID as string,\n\t\tVendorID as string,\n\t\tFixedAssetClass as string,\n\t\tFixedAssetQuantityOnHand as string,\n\t\tFixedAssetOriginalCost as string,\n\t\tFixedAssetNetBookValue as string,\n\t\tFixedAssetAccumulatedDepreciation as string,\n\t\tFixedAssetUsefulLifeRemaining as string,\n\t\tCurrencyID as string,\n\t\tFixedAssetAcquisitionDate as string,\n\t\tFixedAssetInactiveFlag as string,\n\t\tFixedAssetInServiceDate as string,\n\t\tFixedAssetRetirementDate as string,\n\t\tFixedAssetDisposalDate as string,\n\t\tFixedAssetAvailableforSaleDate as string,\n\t\tFixedAssettobeAbandonedorDisposedofOtherthanbyforSaleDate as string,\n\t\tFixedAssetAssetAccount as string,\n\t\tFixedAssetCIPAccount as string,\n\t\tFixedAssetCIPFlag as string,\n\t\tFixedAssetDepreciationAccount as string,\n\t\tFixedAssetAccumulatedDepreciationAccount as string\n\t),\n\tallowSchemaDrift: false,\n\tvalidateSchema: false,\n\tentity: 'FixedAssetMaster.cdm.json/FixedAssetMaster',\n\tformat: 'cdm',\n\tentityPath: 'fixedassetmaster',\n\tmanifestName: 'fixedassetmastermanifest',\n\tcorpusPath: 'fixedasset',\n\tfolderPath: 'fixedasset',\n\tfileSystem: 'data',\n\tcolumnDelimiter: ',',\n\tcolumnNamesAsHeader: true,\n\tcorpusStore: 'adlsgen2',\n\tadlsgen2_fileSystem: 'schema',\n\tmapColumn(\n\t\tFixedAssetID = FIXEDASSETNUMBER,\n\t\tFixedAssetDescription = NAME\n\t)) ~> CDMfixedassetmaster"}},"dependsOn":["[concat(variables('factoryId'), '/datasets/DYNfixedassets')]"]},{"name":"[concat(parameters('factoryName'), '/DYNfixedassets')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureSqlDatabase1')]","type":"LinkedServiceReference"},"annotations":[],"type":"AzureSqlTable","schema":[{"name":"FIXEDASSETNUMBER","type":"nvarchar"},{"name":"ACTIVITYCODE","type":"nvarchar"},{"name":"ACTIVITYCODEDESCRIPTION","type":"nvarchar"},{"name":"AGENT","type":"nvarchar"},{"name":"ASSETCONDITIONDESCRIPTION","type":"nvarchar"},{"name":"ASSETCONDITIONID","type":"nvarchar"},{"name":"ASSETLOCATIONID","type":"nvarchar"},{"name":"ASSETLOCATIONNAME","type":"nvarchar"},{"name":"BARCODE","type":"nvarchar"},{"name":"COMMENTS","type":"nvarchar"},{"name":"CONTACTNAME","type":"nvarchar"},{"name":"CONTACTPERSONNELNUMBER","type":"nvarchar"},{"name":"DEPARTMENTOPERATINGUNITNUMBER","type":"nvarchar"},{"name":"DEPARTMENTSEARCHNAME","type":"nvarchar"},{"name":"DISPOSALRESTRICTIONS","type":"nvarchar"},{"name":"DOCUMENTLOCATION","type":"nvarchar"},{"name":"FIXEDASSETGROUPID","type":"nvarchar"},{"name":"GISREFERENCENUMBER","type":"nvarchar"},{"name":"GUARANTEEDATE","type":"nvarchar"},{"name":"INFORMATION1","type":"nvarchar"},{"name":"INFORMATION2","type":"nvarchar"},{"name":"INFORMATION3","type":"nvarchar"},{"name":"INSURANCEDATE1","type":"nvarchar"},{"name":"INSURANCEDATE2","type":"nvarchar"},{"name":"INSURANCEVENDOR","type":"nvarchar"},{"name":"INSUREDATFAIRMARKETVALUE","type":"nvarchar"},{"name":"INSUREDVALUE","type":"nvarchar"},{"name":"LASTMAINTENANCE","type":"nvarchar"},{"name":"LASTPERIODICVALUECOSTUPDATE","type":"nvarchar"},{"name":"LEASENOTE","type":"nvarchar"},{"name":"LOCATIONID","type":"nvarchar"},{"name":"LOCATIONMEMO","type":"nvarchar"},{"name":"MAJORTYPEDESCRIPTION","type":"nvarchar"},{"name":"MAJORTYPEID","type":"nvarchar"},{"name":"MAKE","type":"nvarchar"},{"name":"MISSINGASSET","type":"nvarchar"},{"name":"MODEL","type":"nvarchar"},{"name":"MODELYEAR","type":"nvarchar"},{"name":"NAME","type":"nvarchar"},{"name":"NEXTMAINTENANCE","type":"nvarchar"},{"name":"PARCELID","type":"nvarchar"},{"name":"PHYSICALINVENTORY","type":"nvarchar"},{"name":"POLICYAMOUNT","type":"nvarchar"},{"name":"POLICYEXPIRATIONDATE","type":"nvarchar"},{"name":"POLICYNUMBER","type":"nvarchar"},{"name":"PROPERTYGROUPDESCRIPTION","type":"nvarchar"},{"name":"PROPERTYGROUPID","type":"nvarchar"},{"name":"PROPERTYTYPE","type":"nvarchar"},{"name":"QUANTITY","type":"nvarchar"},{"name":"REFERENCE","type":"nvarchar"},{"name":"REPLACEMENTCOST","type":"nvarchar"},{"name":"RESPONSIBLENAME","type":"nvarchar"},{"name":"RESPONSIBLEPERSONNELNUMBER","type":"nvarchar"},{"name":"ROOMNUMBER","type":"nvarchar"},{"name":"SEARCHNAME","type":"nvarchar"},{"name":"SERIALNUMBER","type":"nvarchar"},{"name":"SORTFIELD1DESCRIPTION","type":"nvarchar"},{"name":"SORTFIELD1ID","type":"nvarchar"},{"name":"SORTFIELD1SORTING","type":"nvarchar"},{"name":"SORTFIELD2DESCRIPTION","type":"nvarchar"},{"name":"SORTFIELD2ID","type":"nvarchar"},{"name":"SORTFIELD2SORTING","type":"nvarchar"},{"name":"SORTFIELD3DESCRIPTION","type":"nvarchar"},{"name":"SORTFIELD3ID","type":"nvarchar"},{"name":"SORTFIELD3SORTING","type":"nvarchar"},{"name":"TECHNICALINFORMATION1","type":"nvarchar"},{"name":"TECHNICALINFORMATION2","type":"nvarchar"},{"name":"TECHNICALINFORMATION3","type":"nvarchar"},{"name":"TITLEHOLDER","type":"nvarchar"},{"name":"TYPE","type":"nvarchar"},{"name":"UNITCOST","type":"nvarchar"},{"name":"UNITOFMEASURE","type":"nvarchar"}],"typeProperties":{"schema":"dbo","table":"fixedassets"}},"dependsOn":[]}]}